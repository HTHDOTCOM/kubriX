argo-cd:
  global:
    domain: argocd-127-0-0-1.nip.io

  configs:
    params:
      server.insecure: true
    secret:
      createSecret: false
      argocdServerAdminPassword: "$2a$10$u/pIDG1quutGOWfVWOHMnOPiYcl5S79z/MYdxMTi8tcPZhBCwaDvK"
      extra:
        # TODO: not secure, but due to https://github.com/suxess-it/sx-cnp-oss/issues/48
        server.secretkey: 0g3Z0b3lrm7FbF0Nnnm7JNt/nJEhLwcAD/Uzo+PjDDM=

    cm:
      accounts.backstage: apiKey

    rbac:
      policy.csv: |
        p, backstage, applications, get, */*, allow

  server:
    ingress:
      enabled: true
      annotations: 
        nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
        nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
      extraTls:
        - hosts:
          - argocd-127-0-0-1.nip.io
          # Based on the ingress controller used secret might be optional
          secretName: argocd-server-tls
    extensions:
      enabled: true
      contents:
        - name: argo-rollouts
          url: https://github.com/argoproj-labs/rollout-extension/releases/download/v0.3.4/extension.tar
