cert:
  enabled: true
  issuerRef: letsencrypt-prod
  dnsName: argocd-metalstack.platform-engineer.cloud

argo-cd:
  global:
    domain: argocd-metalstack.platform-engineer.cloud

  configs:
    params:
      server.insecure: true

  server:
    ingress:
      ingressClassName: nginx
      enabled: true
      annotations: 
        nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
        nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
        external-dns.alpha.kubernetes.io/ttl: 60
      extraTls:
        - hosts:
          - argocd-metalstack.platform-engineer.cloud
          # Based on the ingress controller used secret might be optional
          secretName: argocd-server-tls
    extensions:
      enabled: true
      contents:
        - name: argo-rollouts
          url: https://github.com/argoproj-labs/rollout-extension/releases/download/v0.3.4/extension.tar
